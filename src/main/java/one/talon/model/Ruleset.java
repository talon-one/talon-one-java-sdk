/*
 * Talon.One API
 * Use the Talon.One API to integrate with your application and to manage applications and campaigns:  - Use the operations in the [Integration API section](#integration-api) are used to integrate with our platform - Use the operation in the [Management API section](#management-api) to manage applications and campaigns.  ## Determining the base URL of the endpoints  The API is available at the same hostname as your Campaign Manager deployment. For example, if you access the Campaign Manager at `https://yourbaseurl.talon.one/`, the URL for the [updateCustomerSessionV2](https://docs.talon.one/integration-api#operation/updateCustomerSessionV2) endpoint is `https://yourbaseurl.talon.one/v2/customer_sessions/{Id}` 
 *
 * The version of the OpenAPI document: 
 * 
 *
 * NOTE: This class is auto generated by OpenAPI Generator (https://openapi-generator.tech).
 * https://openapi-generator.tech
 * Do not edit the class manually.
 */


package one.talon.model;

import java.util.Objects;
import com.google.gson.TypeAdapter;
import com.google.gson.annotations.JsonAdapter;
import com.google.gson.annotations.SerializedName;
import com.google.gson.stream.JsonReader;
import com.google.gson.stream.JsonWriter;
import java.io.IOException;
import java.time.OffsetDateTime;
import java.util.ArrayList;
import java.util.Arrays;
import java.util.List;
import one.talon.model.Binding;
import one.talon.model.Rule;

import com.google.gson.Gson;
import com.google.gson.GsonBuilder;
import com.google.gson.JsonArray;
import com.google.gson.JsonDeserializationContext;
import com.google.gson.JsonDeserializer;
import com.google.gson.JsonElement;
import com.google.gson.JsonObject;
import com.google.gson.JsonParseException;
import com.google.gson.TypeAdapterFactory;
import com.google.gson.reflect.TypeToken;
import com.google.gson.TypeAdapter;
import com.google.gson.stream.JsonReader;
import com.google.gson.stream.JsonWriter;
import java.io.IOException;

import java.util.HashMap;
import java.util.HashSet;
import java.util.List;
import java.util.Map;
import java.util.Set;

import one.talon.JSON;

/**
 * Ruleset
 */
@javax.annotation.Generated(value = "org.openapitools.codegen.languages.JavaClientCodegen", comments = "Generator version: 7.18.0")
public class Ruleset {
  public static final String SERIALIZED_NAME_ID = "id";
  @SerializedName(SERIALIZED_NAME_ID)
  @javax.annotation.Nonnull
  private Long id;

  public static final String SERIALIZED_NAME_CREATED = "created";
  @SerializedName(SERIALIZED_NAME_CREATED)
  @javax.annotation.Nonnull
  private OffsetDateTime created;

  public static final String SERIALIZED_NAME_USER_ID = "userId";
  @SerializedName(SERIALIZED_NAME_USER_ID)
  @javax.annotation.Nonnull
  private Long userId;

  public static final String SERIALIZED_NAME_RULES = "rules";
  @SerializedName(SERIALIZED_NAME_RULES)
  @javax.annotation.Nonnull
  private List<Rule> rules = new ArrayList<>();

  public static final String SERIALIZED_NAME_STRIKETHROUGH_RULES = "strikethroughRules";
  @SerializedName(SERIALIZED_NAME_STRIKETHROUGH_RULES)
  @javax.annotation.Nullable
  private List<Rule> strikethroughRules = new ArrayList<>();

  public static final String SERIALIZED_NAME_BINDINGS = "bindings";
  @SerializedName(SERIALIZED_NAME_BINDINGS)
  @javax.annotation.Nonnull
  private List<Binding> bindings = new ArrayList<>();

  public static final String SERIALIZED_NAME_RB_VERSION = "rbVersion";
  @SerializedName(SERIALIZED_NAME_RB_VERSION)
  @javax.annotation.Nullable
  private String rbVersion;

  public static final String SERIALIZED_NAME_ACTIVATE = "activate";
  @SerializedName(SERIALIZED_NAME_ACTIVATE)
  @javax.annotation.Nullable
  private Boolean activate;

  public static final String SERIALIZED_NAME_CAMPAIGN_ID = "campaignId";
  @SerializedName(SERIALIZED_NAME_CAMPAIGN_ID)
  @javax.annotation.Nullable
  private Long campaignId;

  public static final String SERIALIZED_NAME_TEMPLATE_ID = "templateId";
  @SerializedName(SERIALIZED_NAME_TEMPLATE_ID)
  @javax.annotation.Nullable
  private Long templateId;

  public static final String SERIALIZED_NAME_ACTIVATED_AT = "activatedAt";
  @SerializedName(SERIALIZED_NAME_ACTIVATED_AT)
  @javax.annotation.Nullable
  private OffsetDateTime activatedAt;

  public Ruleset() {
  }

  public Ruleset id(@javax.annotation.Nonnull Long id) {
    this.id = id;
    return this;
  }

  /**
   * The internal ID of this entity.
   * @return id
   */
  @javax.annotation.Nonnull
  public Long getId() {
    return id;
  }

  public void setId(@javax.annotation.Nonnull Long id) {
    this.id = id;
  }


  public Ruleset created(@javax.annotation.Nonnull OffsetDateTime created) {
    this.created = created;
    return this;
  }

  /**
   * The time this entity was created.
   * @return created
   */
  @javax.annotation.Nonnull
  public OffsetDateTime getCreated() {
    return created;
  }

  public void setCreated(@javax.annotation.Nonnull OffsetDateTime created) {
    this.created = created;
  }


  public Ruleset userId(@javax.annotation.Nonnull Long userId) {
    this.userId = userId;
    return this;
  }

  /**
   * The ID of the user associated with this entity.
   * @return userId
   */
  @javax.annotation.Nonnull
  public Long getUserId() {
    return userId;
  }

  public void setUserId(@javax.annotation.Nonnull Long userId) {
    this.userId = userId;
  }


  public Ruleset rules(@javax.annotation.Nonnull List<Rule> rules) {
    this.rules = rules;
    return this;
  }

  public Ruleset addRulesItem(Rule rulesItem) {
    if (this.rules == null) {
      this.rules = new ArrayList<>();
    }
    this.rules.add(rulesItem);
    return this;
  }

  /**
   * Set of rules to apply.
   * @return rules
   */
  @javax.annotation.Nonnull
  public List<Rule> getRules() {
    return rules;
  }

  public void setRules(@javax.annotation.Nonnull List<Rule> rules) {
    this.rules = rules;
  }


  public Ruleset strikethroughRules(@javax.annotation.Nullable List<Rule> strikethroughRules) {
    this.strikethroughRules = strikethroughRules;
    return this;
  }

  public Ruleset addStrikethroughRulesItem(Rule strikethroughRulesItem) {
    if (this.strikethroughRules == null) {
      this.strikethroughRules = new ArrayList<>();
    }
    this.strikethroughRules.add(strikethroughRulesItem);
    return this;
  }

  /**
   * Set of rules to apply for strikethrough.
   * @return strikethroughRules
   */
  @javax.annotation.Nullable
  public List<Rule> getStrikethroughRules() {
    return strikethroughRules;
  }

  public void setStrikethroughRules(@javax.annotation.Nullable List<Rule> strikethroughRules) {
    this.strikethroughRules = strikethroughRules;
  }


  public Ruleset bindings(@javax.annotation.Nonnull List<Binding> bindings) {
    this.bindings = bindings;
    return this;
  }

  public Ruleset addBindingsItem(Binding bindingsItem) {
    if (this.bindings == null) {
      this.bindings = new ArrayList<>();
    }
    this.bindings.add(bindingsItem);
    return this;
  }

  /**
   * An array that provides objects with variable names (name) and talang expressions to whose result they are bound (expression) during rule evaluation. The order of the evaluation is decided by the position in the array.
   * @return bindings
   */
  @javax.annotation.Nonnull
  public List<Binding> getBindings() {
    return bindings;
  }

  public void setBindings(@javax.annotation.Nonnull List<Binding> bindings) {
    this.bindings = bindings;
  }


  public Ruleset rbVersion(@javax.annotation.Nullable String rbVersion) {
    this.rbVersion = rbVersion;
    return this;
  }

  /**
   * The version of the rulebuilder used to create this ruleset.
   * @return rbVersion
   */
  @javax.annotation.Nullable
  public String getRbVersion() {
    return rbVersion;
  }

  public void setRbVersion(@javax.annotation.Nullable String rbVersion) {
    this.rbVersion = rbVersion;
  }


  public Ruleset activate(@javax.annotation.Nullable Boolean activate) {
    this.activate = activate;
    return this;
  }

  /**
   * Indicates whether this created ruleset should be activated for the campaign that owns it.
   * @return activate
   */
  @javax.annotation.Nullable
  public Boolean getActivate() {
    return activate;
  }

  public void setActivate(@javax.annotation.Nullable Boolean activate) {
    this.activate = activate;
  }


  public Ruleset campaignId(@javax.annotation.Nullable Long campaignId) {
    this.campaignId = campaignId;
    return this;
  }

  /**
   * The ID of the campaign that owns this entity.
   * @return campaignId
   */
  @javax.annotation.Nullable
  public Long getCampaignId() {
    return campaignId;
  }

  public void setCampaignId(@javax.annotation.Nullable Long campaignId) {
    this.campaignId = campaignId;
  }


  public Ruleset templateId(@javax.annotation.Nullable Long templateId) {
    this.templateId = templateId;
    return this;
  }

  /**
   * The ID of the campaign template that owns this entity.
   * @return templateId
   */
  @javax.annotation.Nullable
  public Long getTemplateId() {
    return templateId;
  }

  public void setTemplateId(@javax.annotation.Nullable Long templateId) {
    this.templateId = templateId;
  }


  public Ruleset activatedAt(@javax.annotation.Nullable OffsetDateTime activatedAt) {
    this.activatedAt = activatedAt;
    return this;
  }

  /**
   * Timestamp indicating when this Ruleset was activated.
   * @return activatedAt
   */
  @javax.annotation.Nullable
  public OffsetDateTime getActivatedAt() {
    return activatedAt;
  }

  public void setActivatedAt(@javax.annotation.Nullable OffsetDateTime activatedAt) {
    this.activatedAt = activatedAt;
  }



  @Override
  public boolean equals(Object o) {
    if (this == o) {
      return true;
    }
    if (o == null || getClass() != o.getClass()) {
      return false;
    }
    Ruleset ruleset = (Ruleset) o;
    return Objects.equals(this.id, ruleset.id) &&
        Objects.equals(this.created, ruleset.created) &&
        Objects.equals(this.userId, ruleset.userId) &&
        Objects.equals(this.rules, ruleset.rules) &&
        Objects.equals(this.strikethroughRules, ruleset.strikethroughRules) &&
        Objects.equals(this.bindings, ruleset.bindings) &&
        Objects.equals(this.rbVersion, ruleset.rbVersion) &&
        Objects.equals(this.activate, ruleset.activate) &&
        Objects.equals(this.campaignId, ruleset.campaignId) &&
        Objects.equals(this.templateId, ruleset.templateId) &&
        Objects.equals(this.activatedAt, ruleset.activatedAt);
  }

  @Override
  public int hashCode() {
    return Objects.hash(id, created, userId, rules, strikethroughRules, bindings, rbVersion, activate, campaignId, templateId, activatedAt);
  }

  @Override
  public String toString() {
    StringBuilder sb = new StringBuilder();
    sb.append("class Ruleset {\n");
    sb.append("    id: ").append(toIndentedString(id)).append("\n");
    sb.append("    created: ").append(toIndentedString(created)).append("\n");
    sb.append("    userId: ").append(toIndentedString(userId)).append("\n");
    sb.append("    rules: ").append(toIndentedString(rules)).append("\n");
    sb.append("    strikethroughRules: ").append(toIndentedString(strikethroughRules)).append("\n");
    sb.append("    bindings: ").append(toIndentedString(bindings)).append("\n");
    sb.append("    rbVersion: ").append(toIndentedString(rbVersion)).append("\n");
    sb.append("    activate: ").append(toIndentedString(activate)).append("\n");
    sb.append("    campaignId: ").append(toIndentedString(campaignId)).append("\n");
    sb.append("    templateId: ").append(toIndentedString(templateId)).append("\n");
    sb.append("    activatedAt: ").append(toIndentedString(activatedAt)).append("\n");
    sb.append("}");
    return sb.toString();
  }

  /**
   * Convert the given object to string with each line indented by 4 spaces
   * (except the first line).
   */
  private String toIndentedString(Object o) {
    if (o == null) {
      return "null";
    }
    return o.toString().replace("\n", "\n    ");
  }


  public static HashSet<String> openapiFields;
  public static HashSet<String> openapiRequiredFields;

  static {
    // a set of all properties/fields (JSON key names)
    openapiFields = new HashSet<String>(Arrays.asList("id", "created", "userId", "rules", "strikethroughRules", "bindings", "rbVersion", "activate", "campaignId", "templateId", "activatedAt"));

    // a set of required properties/fields (JSON key names)
    openapiRequiredFields = new HashSet<String>(Arrays.asList("id", "created", "userId", "rules", "bindings"));
  }

  /**
   * Validates the JSON Element and throws an exception if issues found
   *
   * @param jsonElement JSON Element
   * @throws IOException if the JSON Element is invalid with respect to Ruleset
   */
  public static void validateJsonElement(JsonElement jsonElement) throws IOException {
      if (jsonElement == null) {
        if (!Ruleset.openapiRequiredFields.isEmpty()) { // has required fields but JSON element is null
          throw new IllegalArgumentException(String.format(java.util.Locale.ROOT, "The required field(s) %s in Ruleset is not found in the empty JSON string", Ruleset.openapiRequiredFields.toString()));
        }
      }

      Set<Map.Entry<String, JsonElement>> entries = jsonElement.getAsJsonObject().entrySet();
      // check to see if the JSON string contains additional fields
      for (Map.Entry<String, JsonElement> entry : entries) {
        if (!Ruleset.openapiFields.contains(entry.getKey())) {
          throw new IllegalArgumentException(String.format(java.util.Locale.ROOT, "The field `%s` in the JSON string is not defined in the `Ruleset` properties. JSON: %s", entry.getKey(), jsonElement.toString()));
        }
      }

      // check to make sure all required properties/fields are present in the JSON string
      for (String requiredField : Ruleset.openapiRequiredFields) {
        if (jsonElement.getAsJsonObject().get(requiredField) == null) {
          throw new IllegalArgumentException(String.format(java.util.Locale.ROOT, "The required field `%s` is not found in the JSON string: %s", requiredField, jsonElement.toString()));
        }
      }
        JsonObject jsonObj = jsonElement.getAsJsonObject();
      // ensure the json data is an array
      if (!jsonObj.get("rules").isJsonArray()) {
        throw new IllegalArgumentException(String.format(java.util.Locale.ROOT, "Expected the field `rules` to be an array in the JSON string but got `%s`", jsonObj.get("rules").toString()));
      }

      JsonArray jsonArrayrules = jsonObj.getAsJsonArray("rules");
      // validate the required field `rules` (array)
      for (int i = 0; i < jsonArrayrules.size(); i++) {
        Rule.validateJsonElement(jsonArrayrules.get(i));
      };
      if (jsonObj.get("strikethroughRules") != null && !jsonObj.get("strikethroughRules").isJsonNull()) {
        JsonArray jsonArraystrikethroughRules = jsonObj.getAsJsonArray("strikethroughRules");
        if (jsonArraystrikethroughRules != null) {
          // ensure the json data is an array
          if (!jsonObj.get("strikethroughRules").isJsonArray()) {
            throw new IllegalArgumentException(String.format(java.util.Locale.ROOT, "Expected the field `strikethroughRules` to be an array in the JSON string but got `%s`", jsonObj.get("strikethroughRules").toString()));
          }

          // validate the optional field `strikethroughRules` (array)
          for (int i = 0; i < jsonArraystrikethroughRules.size(); i++) {
            Rule.validateJsonElement(jsonArraystrikethroughRules.get(i));
          };
        }
      }
      // ensure the json data is an array
      if (!jsonObj.get("bindings").isJsonArray()) {
        throw new IllegalArgumentException(String.format(java.util.Locale.ROOT, "Expected the field `bindings` to be an array in the JSON string but got `%s`", jsonObj.get("bindings").toString()));
      }

      JsonArray jsonArraybindings = jsonObj.getAsJsonArray("bindings");
      // validate the required field `bindings` (array)
      for (int i = 0; i < jsonArraybindings.size(); i++) {
        Binding.validateJsonElement(jsonArraybindings.get(i));
      };
      if ((jsonObj.get("rbVersion") != null && !jsonObj.get("rbVersion").isJsonNull()) && !jsonObj.get("rbVersion").isJsonPrimitive()) {
        throw new IllegalArgumentException(String.format(java.util.Locale.ROOT, "Expected the field `rbVersion` to be a primitive type in the JSON string but got `%s`", jsonObj.get("rbVersion").toString()));
      }
  }

  public static class CustomTypeAdapterFactory implements TypeAdapterFactory {
    @SuppressWarnings("unchecked")
    @Override
    public <T> TypeAdapter<T> create(Gson gson, TypeToken<T> type) {
       if (!Ruleset.class.isAssignableFrom(type.getRawType())) {
         return null; // this class only serializes 'Ruleset' and its subtypes
       }
       final TypeAdapter<JsonElement> elementAdapter = gson.getAdapter(JsonElement.class);
       final TypeAdapter<Ruleset> thisAdapter
                        = gson.getDelegateAdapter(this, TypeToken.get(Ruleset.class));

       return (TypeAdapter<T>) new TypeAdapter<Ruleset>() {
           @Override
           public void write(JsonWriter out, Ruleset value) throws IOException {
             JsonObject obj = thisAdapter.toJsonTree(value).getAsJsonObject();
             elementAdapter.write(out, obj);
           }

           @Override
           public Ruleset read(JsonReader in) throws IOException {
             JsonElement jsonElement = elementAdapter.read(in);
             validateJsonElement(jsonElement);
             return thisAdapter.fromJsonTree(jsonElement);
           }

       }.nullSafe();
    }
  }

  /**
   * Create an instance of Ruleset given an JSON string
   *
   * @param jsonString JSON string
   * @return An instance of Ruleset
   * @throws IOException if the JSON string is invalid with respect to Ruleset
   */
  public static Ruleset fromJson(String jsonString) throws IOException {
    return JSON.getGson().fromJson(jsonString, Ruleset.class);
  }

  /**
   * Convert an instance of Ruleset to an JSON string
   *
   * @return JSON string
   */
  public String toJson() {
    return JSON.getGson().toJson(this);
  }
}

